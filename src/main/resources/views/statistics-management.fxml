<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>

<VBox xmlns="http://javafx.com/javafx/8.0.171"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.ptudn12.main.controller.StatisticsManagementController"
      stylesheets="@statistics-management-styles.css"
      spacing="20" style="-fx-background-color: #f8f9fa;">
    
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>
    
    <!-- Header Section -->
    <HBox alignment="CENTER_LEFT" spacing="15" styleClass="header-box">
        <Label text="ðŸ“Š Thá»‘ng KÃª Chi Tiáº¿t Theo Tuyáº¿n ÄÆ°á»ng" styleClass="header-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="ðŸ“¥ Xuáº¥t PDF" onAction="#handleExportPDF" styleClass="filter-button" fx:id="btnExportPDF"/>
    </HBox>

    <!-- Filter Section -->
    <TitledPane text="ðŸ” Bá»™ Lá»c NÃ¢ng Cao" animated="true" collapsible="true" expanded="false">
        <VBox spacing="15" style="-fx-padding: 20;">
            <GridPane hgap="15" vgap="10">
                <!-- Row 1: Search by name -->
                <Label text="TÃ¬m kiáº¿m tuyáº¿n:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtSearch" promptText="Nháº­p tÃªn tuyáº¿n..." 
                           onKeyReleased="#handleSearch" styleClass="search-field"
                           GridPane.columnIndex="1" GridPane.rowIndex="0" prefWidth="200"/>
                
                <!-- Row 2: Filter by code -->
                <Label text="Lá»c theo mÃ£ tuyáº¿n:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtMaTuyen" promptText="Nháº­p mÃ£ tuyáº¿n..." 
                           onKeyReleased="#handleFilterByCode" styleClass="search-field"
                           GridPane.columnIndex="1" GridPane.rowIndex="1" prefWidth="200"/>
                
                <!-- Row 3: Filter by ratio -->
                <Label text="Lá»c theo tá»· lá»‡ láº¯p Ä‘áº§y (%):" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtTiLe" promptText="Nháº­p tá»· lá»‡ tá»‘i thiá»ƒu (0-100)..." 
                           onKeyReleased="#handleFilterByRatio" styleClass="search-field"
                           GridPane.columnIndex="1" GridPane.rowIndex="2" prefWidth="200"/>

                <!-- Action Buttons -->
                <HBox spacing="10" GridPane.columnIndex="0" GridPane.rowIndex="3" GridPane.columnSpan="2">
                    <Button text="âœ… Lá»c" onAction="#handleApplyFilters"
                        style="-fx-background-color: linear-gradient(to right, #6a11cb, #2575fc); -fx-text-fill: white; -fx-font-size: 13px; -fx-padding: 8 16; -fx-background-radius: 20; -fx-cursor: hand;"/>
                    <Button text="ðŸ”„ XÃ³a Bá»™ Lá»c" onAction="#handleResetFilters" 
                        style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-size: 13px; -fx-padding: 8 15; -fx-background-radius: 20; -fx-cursor: hand;"/>
                </HBox>
            </GridPane>
        </VBox>
    </TitledPane>

    <!-- Table Section -->
    <TableView fx:id="tableStats" VBox.vgrow="ALWAYS">
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
        </columnResizePolicy>
        <columns>
            <TableColumn text="MÃ£ Tuyáº¿n" prefWidth="-1" fx:id="colMaTuyen"/>
            <TableColumn text="TÃªn Tuyáº¿n" prefWidth="-1" fx:id="colTenTuyen"/>
            <TableColumn text="Tá»•ng VÃ© BÃ¡n" prefWidth="-1" fx:id="colTongVe"/>
            <TableColumn text="Tá»· Lá»‡ Láº¥p Äáº§y" prefWidth="-1" fx:id="colTiLe"/>
            <TableColumn text="Chuyáº¿n Khá»Ÿi HÃ nh" prefWidth="-1" fx:id="colSoChuyen"/>
            <TableColumn text="Doanh Thu Æ¯á»›c TÃ­nh" prefWidth="-1" fx:id="colDoanhThu"/>
        </columns>
    </TableView>
</VBox>
